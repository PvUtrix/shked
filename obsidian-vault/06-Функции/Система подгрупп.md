# –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–≥—Ä—É–ø–ø

> –ú–µ—Ö–∞–Ω–∏–∑–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –Ω–∞ –ø–æ–¥–≥—Ä—É–ø–ø—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–≥—Ä—É–ø–ø –ø–æ–∑–≤–æ–ª—è–µ—Ç –≥–∏–±–∫–æ —Ä–∞–∑–¥–µ–ª—è—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –æ–¥–Ω–æ–π –≥—Ä—É–ø–ø—ã –Ω–∞ –ø–æ–¥–≥—Ä—É–ø–ø—ã –ø–æ-—Ä–∞–∑–Ω–æ–º—É –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤. –°—Ç—É–¥–µ–Ω—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –≤ –ø–æ–¥–≥—Ä—É–ø–ø–µ 1 –ø–æ –æ–¥–Ω–æ–º—É –ø—Ä–µ–¥–º–µ—Ç—É –∏ –≤ –ø–æ–¥–≥—Ä—É–ø–ø–µ 2 –ø–æ –¥—Ä—É–≥–æ–º—É.

**ADR**: [[ADR-006 –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–≥—Ä—É–ø–ø]]  
**–°—Ç–∞—Ç—É—Å**: üü° –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

## –ü—Ä–æ–±–ª–µ–º–∞

–í —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ –ú–§–¢–ò —Ä–∞–∑–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã —Ç—Ä–µ–±—É—é—Ç —Ä–∞–∑–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤:
- **–ö–æ–º–º–µ—Ä—Ü–∏—è** - 2 –ø–æ–¥–≥—Ä—É–ø–ø—ã
- **–°–µ–º–∏–Ω–∞—Ä—ã** - 3 –ø–æ–¥–≥—Ä—É–ø–ø—ã  
- **–§–∏–Ω–∞–Ω—Å—ã** - 2 –ø–æ–¥–≥—Ä—É–ø–ø—ã
- **–°–∏—Å—Ç–µ–º–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ** - 2 –ø–æ–¥–≥—Ä—É–ø–ø—ã

–ù–µ–ª—å–∑—è –ø—Ä–æ—Å—Ç–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –≥—Ä—É–ø–ø—É –Ω–∞ "–ø–æ–¥–≥—Ä—É–ø–ø—É 1" –∏ "–ø–æ–¥–≥—Ä—É–ø–ø—É 2", —Ç–∞–∫ –∫–∞–∫ –æ–¥–∏–Ω —Å—Ç—É–¥–µ–Ω—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å:
- –í –ø–æ–¥–≥—Ä—É–ø–ø–µ 1 –ø–æ –∫–æ–º–º–µ—Ä—Ü–∏–∏
- –í –ø–æ–¥–≥—Ä—É–ø–ø–µ 2 –ø–æ —Å–µ–º–∏–Ω–∞—Ä–∞–º
- –í –ø–æ–¥–≥—Ä—É–ø–ø–µ 1 –ø–æ —Ñ–∏–Ω–∞–Ω—Å–∞–º

## –†–µ—à–µ–Ω–∏–µ

–ö–∞–∂–¥–æ–º—É —Å—Ç—É–¥–µ–Ω—Ç—É –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –Ω–æ–º–µ—Ä –ø–æ–¥–≥—Ä—É–ø–ø—ã **–¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ –æ—Ç–¥–µ–ª—å–Ω–æ**.

## –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

### UserGroup [[UserGroup]]

–°–≤—è–∑—å —Å—Ç—É–¥–µ–Ω—Ç–∞ —Å –≥—Ä—É–ø–ø–æ–π –∏ –µ–≥–æ –ø–æ–¥–≥—Ä—É–ø–ø—ã:

```prisma
model UserGroup {
  id                     String   @id @default(cuid())
  userId                 String
  groupId                String
  subgroupCommerce       Int?     // 1, 2
  subgroupTutorial       Int?     // 1, 2, 3
  subgroupFinance        Int?     // 1, 2
  subgroupSystemThinking Int?     // 1, 2
  createdAt              DateTime @default(now())
  
  group                  Group    @relation(...)
  user                   User     @relation(...)

  @@unique([userId, groupId])
  @@map("user_groups")
}
```

### Schedule [[Schedule]]

–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–æ–¥–≥—Ä—É–ø–ø—ã:

```prisma
model Schedule {
  id          String   @id
  subjectId   String
  groupId     String?
  subgroupId  String?  // null = –≤—Å—è –≥—Ä—É–ø–ø–∞, "1"/"2"/"3" = –ø–æ–¥–≥—Ä—É–ø–ø–∞
  date        DateTime
  startTime   String
  endTime     String
  location    String?
  // ...
}
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Å—Ç—É–¥–µ–Ω—Ç–∞ –≤ –ø–æ–¥–≥—Ä—É–ø–ø—ã

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å** (TODO): `/admin/groups/[id]/students`

```typescript
await prisma.userGroup.upsert({
  where: {
    userId_groupId: {
      userId: studentId,
      groupId: groupId
    }
  },
  update: {
    subgroupCommerce: 1,
    subgroupTutorial: 2,
    subgroupFinance: 1,
    subgroupSystemThinking: 2
  },
  create: {
    userId: studentId,
    groupId: groupId,
    subgroupCommerce: 1,
    subgroupTutorial: 2,
    subgroupFinance: 1,
    subgroupSystemThinking: 2
  }
})
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –¥–ª—è –ø–æ–¥–≥—Ä—É–ø–ø—ã

**–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: `/admin/schedule`  
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç**: [[schedule-form.tsx]]

```typescript
await prisma.schedule.create({
  data: {
    subjectId: commerceSubjectId,
    groupId: groupId,
    subgroupId: '1',  // –¢–æ–ª—å–∫–æ –¥–ª—è –ø–æ–¥–≥—Ä—É–ø–ø—ã 1
    date: new Date('2024-11-05'),
    startTime: '10:00',
    endTime: '11:30',
    location: '–ê—É–¥. 123',
    eventType: '–°–µ–º–∏–Ω–∞—Ä'
  }
})
```

**–í—ã–±–æ—Ä –ø–æ–¥–≥—Ä—É–ø–ø—ã –≤ —Ñ–æ—Ä–º–µ**:
```tsx
<Select name="subgroupId">
  <option value="">–í—Å—è –≥—Ä—É–ø–ø–∞</option>
  <option value="1">–ü–æ–¥–≥—Ä—É–ø–ø–∞ 1</option>
  <option value="2">–ü–æ–¥–≥—Ä—É–ø–ø–∞ 2</option>
  <option value="3">–ü–æ–¥–≥—Ä—É–ø–ø–∞ 3</option>
</Select>
```

### 3. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞

**–§—É–Ω–∫—Ü–∏—è**: `getStudentSchedule()`

```typescript
async function getStudentSchedule(
  studentId: string,
  groupId: string,
  startDate: Date,
  endDate: Date
) {
  // 1. –ü–æ–ª—É—á–∏—Ç—å –ø–æ–¥–≥—Ä—É–ø–ø—ã —Å—Ç—É–¥–µ–Ω—Ç–∞
  const userGroup = await prisma.userGroup.findUnique({
    where: {
      userId_groupId: {
        userId: studentId,
        groupId: groupId
      }
    }
  })
  
  // 2. –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã —Å –ø–æ–¥–≥—Ä—É–ø–ø–∞–º–∏
  const subjects = await prisma.subject.findMany()
  const commerceSubject = subjects.find(s => s.name === '–ö–æ–º–º–µ—Ä—Ü–∏—è')
  const tutorialSubject = subjects.find(s => s.name === '–°–µ–º–∏–Ω–∞—Ä—ã')
  const financeSubject = subjects.find(s => s.name === '–§–∏–Ω–∞–Ω—Å—ã')
  const systemThinkingSubject = subjects.find(s => s.name === '–°–∏—Å—Ç–µ–º–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ')
  
  // 3. –ü–æ—Å—Ç—Ä–æ–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä OR
  const schedules = await prisma.schedule.findMany({
    where: {
      groupId: groupId,
      date: {
        gte: startDate,
        lte: endDate
      },
      OR: [
        // –ó–∞–Ω—è—Ç–∏—è –¥–ª—è –≤—Å–µ–π –≥—Ä—É–ø–ø—ã
        { subgroupId: null },
        
        // –ö–æ–º–º–µ—Ä—Ü–∏—è - –ø–æ–¥–≥—Ä—É–ø–ø–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞
        {
          subjectId: commerceSubject?.id,
          subgroupId: userGroup?.subgroupCommerce?.toString()
        },
        
        // –°–µ–º–∏–Ω–∞—Ä—ã - –ø–æ–¥–≥—Ä—É–ø–ø–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞
        {
          subjectId: tutorialSubject?.id,
          subgroupId: userGroup?.subgroupTutorial?.toString()
        },
        
        // –§–∏–Ω–∞–Ω—Å—ã - –ø–æ–¥–≥—Ä—É–ø–ø–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞
        {
          subjectId: financeSubject?.id,
          subgroupId: userGroup?.subgroupFinance?.toString()
        },
        
        // –°–∏—Å—Ç–µ–º–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ - –ø–æ–¥–≥—Ä—É–ø–ø–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞
        {
          subjectId: systemThinkingSubject?.id,
          subgroupId: userGroup?.subgroupSystemThinking?.toString()
        }
      ]
    },
    include: {
      subject: {
        include: {
          lector: true
        }
      }
    },
    orderBy: [
      { date: 'asc' },
      { startTime: 'asc' }
    ]
  })
  
  return schedules
}
```

## –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

### –°—Ç—É–¥–µ–Ω—Ç –ò–≤–∞–Ω

**–ü–æ–¥–≥—Ä—É–ø–ø—ã**:
- –ö–æ–º–º–µ—Ä—Ü–∏—è: 1
- –°–µ–º–∏–Ω–∞—Ä—ã: 2
- –§–∏–Ω–∞–Ω—Å—ã: 1
- –°–∏—Å—Ç–µ–º–Ω–æ–µ –º—ã—à–ª–µ–Ω–∏–µ: 2

### –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã –ë05-123

| –í—Ä–µ–º—è | –ü—Ä–µ–¥–º–µ—Ç | –ü–æ–¥–≥—Ä—É–ø–ø–∞ | –ò–≤–∞–Ω –≤–∏–¥–∏—Ç? |
|-------|---------|-----------|-------------|
| 10:00 | –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ | - (–≤—Å—è –≥—Ä—É–ø–ø–∞) | ‚úÖ –î–∞ |
| 12:00 | –ö–æ–º–º–µ—Ä—Ü–∏—è | 1 | ‚úÖ –î–∞ |
| 12:00 | –ö–æ–º–º–µ—Ä—Ü–∏—è | 2 | ‚ùå –ù–µ—Ç |
| 14:00 | –°–µ–º–∏–Ω–∞—Ä—ã | 1 | ‚ùå –ù–µ—Ç |
| 14:00 | –°–µ–º–∏–Ω–∞—Ä—ã | 2 | ‚úÖ –î–∞ |
| 16:00 | –§–∏–Ω–∞–Ω—Å—ã | 1 | ‚úÖ –î–∞ |

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ò–≤–∞–Ω –≤–∏–¥–∏—Ç 4 –∑–∞–Ω—è—Ç–∏—è, –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –ø–æ–¥ –µ–≥–æ –ø–æ–¥–≥—Ä—É–ø–ø—ã.

## –°—Ç–∞—Ç—É—Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

1. **–ú–æ–¥–µ–ª—å UserGroup** —Å –ø–æ–ª—è–º–∏ –ø–æ–¥–≥—Ä—É–ø–ø
2. **–ü–æ–ª–µ subgroupId** –≤ Schedule
3. **–ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î**
4. **–õ–æ–≥–∏–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏** —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è

### ‚è≥ TODO (–≤ —Å–ª–µ–¥—É—é—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö)

1. **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏** `/admin/groups/[id]/students`
   - –¢–∞–±–ª–∏—Ü–∞ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≥—Ä—É–ø–ø—ã
   - –í—ã–ø–∞–¥–∞—é—â–∏–µ —Å–ø–∏—Å–∫–∏ –¥–ª—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–¥–≥—Ä—É–ø–ø
   - –ö–Ω–æ–ø–∫–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"

2. **–í—ã–±–æ—Ä –ø–æ–¥–≥—Ä—É–ø–ø—ã –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è** `/admin/schedule`
   - –û–ø—Ü–∏—è "–ü–æ–¥–≥—Ä—É–ø–ø–∞" –≤ —Ñ–æ—Ä–º–µ
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∫—Ä—ã—Ç–∏–µ –µ—Å–ª–∏ –ø—Ä–µ–¥–º–µ—Ç –±–µ–∑ –ø–æ–¥–≥—Ä—É–ø–ø

3. **API endpoints**:
   - `GET /api/groups/[id]/students` - —Å—Ç—É–¥–µ–Ω—Ç—ã —Å –ø–æ–¥–≥—Ä—É–ø–ø–∞–º–∏
   - `PUT /api/groups/[id]/students/[studentId]/subgroups` - –Ω–∞–∑–Ω–∞—á–∏—Ç—å –ø–æ–¥–≥—Ä—É–ø–ø—ã

4. **–ò–º–ø–æ—Ä—Ç –ø–æ–¥–≥—Ä—É–ø–ø –∏–∑ Excel**
   - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞ —Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ UserGroup

5. **UI –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–∞**
   - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–≤–æ–∏—Ö –ø–æ–¥–≥—Ä—É–ø–ø –≤ –ø—Ä–æ—Ñ–∏–ª–µ
   - –í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π –ø–æ–¥–≥—Ä—É–ø–ø—ã

## –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ü–æ–∫–∞ UI –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω, –º–æ–∂–Ω–æ:

### 1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å description –≤ Schedule
```typescript
await prisma.schedule.create({
  data: {
    // ...
    description: '–°–µ–º–∏–Ω–∞—Ä (–ø–æ–¥–≥—Ä—É–ø–ø–∞ 1)'
  }
})
```

### 2. –ü—Ä—è–º—ã–µ SQL –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
```sql
-- –ù–∞–∑–Ω–∞—á–∏—Ç—å –≤—Å–µ—Ö —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≥—Ä—É–ø–ø—ã –≤ –ø–æ–¥–≥—Ä—É–ø–ø—ã —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ
WITH numbered_students AS (
  SELECT 
    id,
    ROW_NUMBER() OVER (ORDER BY id) as rn
  FROM users
  WHERE group_id = 'your-group-id'
  AND role = 'student'
)
INSERT INTO user_groups (
  id,
  user_id,
  group_id,
  subgroup_commerce,
  subgroup_tutorial,
  subgroup_finance,
  subgroup_system_thinking
)
SELECT 
  gen_random_uuid(),
  id,
  'your-group-id',
  ((rn - 1) % 2) + 1,  -- –ß–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ 1,2,1,2...
  ((rn - 1) % 3) + 1,  -- –ß–µ—Ä–µ–¥–æ–≤–∞–Ω–∏–µ 1,2,3,1,2,3...
  ((rn - 1) % 2) + 1,
  ((rn - 1) % 2) + 1
FROM numbered_students;
```

### 3. –°–∫—Ä–∏–ø—Ç –¥–ª—è –º–∞—Å—Å–æ–≤–æ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
```typescript
// scripts/assign-subgroups.ts
const students = await prisma.user.findMany({
  where: {
    groupId: 'group-id',
    role: 'student'
  }
})

for (let i = 0; i < students.length; i++) {
  await prisma.userGroup.upsert({
    where: {
      userId_groupId: {
        userId: students[i].id,
        groupId: 'group-id'
      }
    },
    update: {
      subgroupCommerce: (i % 2) + 1,      // 1 –∏–ª–∏ 2
      subgroupTutorial: (i % 3) + 1,      // 1, 2 –∏–ª–∏ 3
      subgroupFinance: (i % 2) + 1,
      subgroupSystemThinking: (i % 2) + 1
    },
    create: {
      userId: students[i].id,
      groupId: 'group-id',
      subgroupCommerce: (i % 2) + 1,
      subgroupTutorial: (i % 3) + 1,
      subgroupFinance: (i % 2) + 1,
      subgroupSystemThinking: (i % 2) + 1
    }
  })
}
```

## –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ —Å –ø–æ–¥–≥—Ä—É–ø–ø–∞–º–∏

### 1. –û–±–Ω–æ–≤–∏—Ç—å Prisma Schema

```prisma
model UserGroup {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
  subgroupNewSubject Int?  // –ù–æ–≤–æ–µ –ø–æ–ª–µ
}
```

### 2. –°–æ–∑–¥–∞—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é

```bash
npx prisma migrate dev --name add_new_subject_subgroup
npx prisma generate
```

### 3. –û–±–Ω–æ–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é getStudentSchedule()

–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –ø—Ä–µ–¥–º–µ—Ç –≤ OR —É—Å–ª–æ–≤–∏–µ:

```typescript
{
  subject: { name: '–ù–æ–≤—ã–π –ø—Ä–µ–¥–º–µ—Ç' },
  subgroupId: userGroup?.subgroupNewSubject?.toString()
}
```

### 4. –û–±–Ω–æ–≤–∏—Ç—å UI (–∫–æ–≥–¥–∞ –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω)

–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –ø–æ–ª–µ –≤ —Ñ–æ—Ä–º—É —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–≥—Ä—É–ø–ø–∞–º–∏.

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Ä–µ—à–µ–Ω–∏—è

### ‚úÖ –ì–∏–±–∫–æ—Å—Ç—å
–ö–∞–∂–¥—ã–π –ø—Ä–µ–¥–º–µ—Ç –∏–º–µ–µ—Ç —Å–≤–æ–∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –ø–æ–¥–≥—Ä—É–ø–ø—ã

### ‚úÖ –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
Prisma –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç TypeScript —Ç–∏–ø—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

### ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
–ù–µ—Ç —Å–ª–æ–∂–Ω—ã—Ö joins, –±—ã—Å—Ç—Ä—ã–µ –∑–∞–ø—Ä–æ—Å—ã

### ‚úÖ –ü—Ä–æ—Å—Ç–æ—Ç–∞
–ü–æ–Ω—è—Ç–Ω–∞—è —Å—Ö–µ–º–∞ –ë–î, –ª–µ–≥–∫–æ –æ–±—ä—è—Å–Ω–∏—Ç—å

## –ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ —Ä–µ—à–µ–Ω–∏—è

### ‚ö†Ô∏è –ñ–µ—Å—Ç–∫–æ—Å—Ç—å —Å—Ö–µ–º—ã
–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ –Ω—É–∂–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –ë–î

### ‚ö†Ô∏è –°–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç OR —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ —É—Å–ª–æ–≤–∏—è–º–∏

### ‚ö†Ô∏è –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏
–ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å getStudentSchedule() –ø—Ä–∏ –∫–∞–∂–¥–æ–º –Ω–æ–≤–æ–º –ø—Ä–µ–¥–º–µ—Ç–µ

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: JSON –ø–æ–ª–µ
```prisma
model UserGroup {
  subgroups Json  // { "commerce": 1, "tutorial": 2 }
}
```
‚ùå –ú–∏–Ω—É—Å—ã: –ù–µ—Ç —Ç–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, —Å–ª–æ–∂–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

### –í–∞—Ä–∏–∞–Ω—Ç 2: –û—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞
```prisma
model Subgroup {
  id        String
  subjectId String
  students  User[]
}
```
‚ùå –ú–∏–Ω—É—Å—ã: –ë–æ–ª—å—à–µ joins, —Å–ª–æ–∂–Ω–µ–µ –∑–∞–ø—Ä–æ—Å—ã

### –í–∞—Ä–∏–∞–Ω—Ç 3: –í—ã–±—Ä–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ ‚úÖ
–û—Ç–¥–µ–ª—å–Ω—ã–µ –ø–æ–ª—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ - –±–∞–ª–∞–Ω—Å –º–µ–∂–¥—É –≥–∏–±–∫–æ—Å—Ç—å—é –∏ –ø—Ä–æ—Å—Ç–æ—Ç–æ–π.

## –°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

### –ú–æ–¥–µ–ª–∏
- [[UserGroup]] - —Ö—Ä–∞–Ω–∏—Ç –ø–æ–¥–≥—Ä—É–ø–ø—ã —Å—Ç—É–¥–µ–Ω—Ç–∞
- [[Schedule]] - –ø–æ–ª–µ subgroupId
- [[User]] - —Å—Ç—É–¥–µ–Ω—Ç—ã
- [[Group]] - —É—á–µ–±–Ω–∞—è –≥—Ä—É–ø–ø–∞
- [[Subject]] - –ø—Ä–µ–¥–º–µ—Ç—ã

### –§—É–Ω–∫—Ü–∏–∏
- [[–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º]] - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–¥–≥—Ä—É–ø–ø—ã

### API
- [[Schedules API]] - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–æ–¥–≥—Ä—É–ø–ø–∞–º
- [[Groups API]] - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–¥–≥—Ä—É–ø–ø–∞–º–∏ (TODO)

### ADR
- [[ADR-006 –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–≥—Ä—É–ø–ø]] - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –†–æ–ª–∏
- [[Admin]] - –Ω–∞–∑–Ω–∞—á–∞–µ—Ç –ø–æ–¥–≥—Ä—É–ø–ø—ã
- [[Student]] - –≤–∏–¥–∏—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ —Å–≤–æ–∏—Ö –ø–æ–¥–≥—Ä—É–ø–ø

## –§–∞–π–ª—ã

- **–ú–æ–¥–µ–ª—å**: `prisma/schema.prisma`
- **–¢–∏–ø—ã**: `lib/types.ts`
- **–§—É–Ω–∫—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏**: Helper —Ñ—É–Ω–∫—Ü–∏—è (TODO: –≤—ã–¥–µ–ª–∏—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª)
- **Admin —Å—Ç—Ä–∞–Ω–∏—Ü—ã** (TODO): `app/admin/groups/[id]/students/page.tsx`

## –û—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [docs/features/SUBGROUPS.md](../../docs/features/SUBGROUPS.md)

---

#function #subgroups #schedule #wip

