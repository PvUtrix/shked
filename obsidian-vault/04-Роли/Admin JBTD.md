# JBTD: Администратор (Admin)

> Jobs To Be Done для роли администратора системы SmartSchedule

## О роли

**Admin** - администратор системы с полным доступом ко всем функциям. Отвечает за настройку системы, управление пользователями, группами, предметами и контроль за работой всей платформы.

**Основной файл**: [[Admin]]

---

## Job Stories

### 1. Добавление нового пользователя в систему

**Когда** в университет поступает новый студент или приходит новый преподаватель,  
**я хочу** быстро создать учетную запись с правильной ролью и назначениями,  
**чтобы** пользователь мог сразу начать работать с системой

**Критерии приемки:**
- Можно создать пользователя с любой ролью (student, teacher, mentor, admin)
- Для студента обязательно указание группы
- Генерируется временный пароль для первого входа
- Email используется для уникальной идентификации
- Созданный пользователь сразу получает доступ к системе

**Текущее решение:**
- Интерфейс: `/admin/users`
- API: `POST /api/users`
- Компоненты: `components/admin/user-form.tsx`
- Модель: [[User]]

---

### 2. Назначение преподавателя к предмету

**Когда** предмет готов к запуску и нужен ответственный преподаватель,  
**я хочу** назначить лектора к этому предмету,  
**чтобы** он мог создавать домашние задания и проверять работы студентов

**Критерии приемки:**
- Выбираю предмет из списка существующих
- Выбираю пользователя с ролью "teacher" из выпадающего списка
- После назначения лектор видит предмет в своей панели
- Лектор получает права на создание ДЗ для этого предмета
- Можно переназначить лектора на другого

**Текущее решение:**
- Интерфейс: `/admin/subjects`
- API: `PUT /api/subjects/[id]`
- Компоненты: `components/admin/subject-form.tsx`
- Модель: [[Subject]]
- Связь: [[Teacher]]

---

### 3. Создание учебной группы и распределение студентов

**Когда** начинается новый учебный год или семестр,  
**я хочу** создать группу и добавить в неё студентов,  
**чтобы** они видели релевантное расписание и получали домашние задания

**Критерии приемки:**
- Можно создать группу с уникальным названием (например, "Б05-123")
- Можно назначить ментора для группы
- Студенты могут быть добавлены при создании или позже
- Группа доступна для выбора при создании расписания
- Студенты группы автоматически видят расписание группы

**Текущее решение:**
- Интерфейс: `/admin/groups`
- API: `POST /api/groups`, `PUT /api/groups/[id]`
- Компоненты: `components/admin/group-form.tsx`
- Модель: [[Group]]
- Связь: [[Student]], [[Mentor]]

---

### 4. Создание расписания занятий

**Когда** нужно составить расписание на семестр или неделю,  
**я хочу** создать занятия с указанием времени, места и группы,  
**чтобы** студенты и преподаватели знали когда и где проходят пары

**Критерии приемки:**
- Указываю предмет, группу, дату и время
- Можно указать подгруппу (1 или 2) для деления потока
- Указываю тип занятия (Лекция, Семинар, Лабораторная)
- Указываю аудиторию/место проведения
- Расписание сразу отображается у студентов группы
- Преподаватель видит занятие в своём расписании

**Текущее решение:**
- Интерфейс: `/admin/schedule`
- API: `POST /api/schedules`
- Компоненты: `components/admin/schedule-form.tsx`
- Модель: [[Schedule]]
- Связанное: [[Система подгрупп]]

---

### 5. Настройка Telegram бота для уведомлений

**Когда** нужно настроить автоматические уведомления для пользователей,  
**я хочу** сконфигурировать Telegram бота и расписание отправки,  
**чтобы** студенты и преподаватели получали своевременные напоминания

**Критерии приемки:**
- Можно указать токен Telegram бота
- Можно настроить типы уведомлений (занятия, дедлайны, сводки)
- Можно указать время отправки для разных типов уведомлений
- Можно включить/отключить уведомления глобально
- Изменения применяются без перезапуска системы

**Текущее решение:**
- Интерфейс: `/admin/settings`
- API: `POST /api/telegram/config`
- Модель: [[BotSettings]]
- Документация: [[Telegram интеграция]]
- Код: `lib/telegram/bot.ts`, `lib/cron/init.ts`

---

### 6. Мониторинг активности системы

**Когда** нужно понять как используется система,  
**я хочу** видеть статистику по пользователям, группам и активности,  
**чтобы** выявлять проблемы и планировать улучшения

**Критерии приемки:**
- Вижу общее количество пользователей по ролям
- Вижу количество групп и предметов
- Вижу количество активных домашних заданий
- Вижу статистику по расписанию (занятий на неделю)
- Вижу последние действия в системе

**Текущее решение:**
- Интерфейс: `/admin` (главная страница)
- API: `GET /api/admin/stats`
- Компонент: `app/admin/page.tsx`
- Модели: [[User]], [[Group]], [[Subject]], [[Schedule]], [[Homework]]

---

### 7. Изменение роли пользователя

**Когда** статус пользователя меняется (студент становится ментором, или ассистент становится лектором),  
**я хочу** изменить роль пользователя в системе,  
**чтобы** он получил соответствующие права доступа

**Критерии приемки:**
- Выбираю пользователя из списка
- Выбираю новую роль из выпадающего списка
- Изменения применяются мгновенно
- Пользователь перенаправляется на страницу своей новой роли при следующем входе
- Нельзя изменить собственную роль администратора
- Связи с группами/предметами сохраняются при смене роли

**Текущее решение:**
- Интерфейс: `/admin/users`
- API: `PUT /api/users/[id]/role`
- Компонент: `components/admin/user-form.tsx`
- Модель: [[User]]
- Документация: [[Роли пользователей]]

---

## Связанные документы

### Роли
- [[Admin]] - основная документация роли
- [[Student]] - студенты
- [[Teacher]] - преподаватели
- [[Mentor]] - менторы

### Модели данных
- [[User]] - пользователи системы
- [[Group]] - учебные группы
- [[Subject]] - предметы
- [[Schedule]] - расписание
- [[Homework]] - домашние задания
- [[BotSettings]] - настройки бота

### API
- [[Users API]] - управление пользователями
- [[Groups API]] - управление группами
- [[Subjects API]] - управление предметами
- [[Schedules API]] - управление расписанием
- [[Telegram API]] - настройка бота

### Компоненты
- [[admin-nav.tsx]] - навигация администратора
- [[user-form.tsx]] - форма пользователя
- [[group-form.tsx]] - форма группы
- [[subject-form.tsx]] - форма предмета
- [[schedule-form.tsx]] - форма расписания

---

#jbtd #admin #jobs-to-be-done #user-stories

