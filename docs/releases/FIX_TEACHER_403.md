# Исправление ошибки 403 для роли lector

## Проблема

При попытке доступа к странице `/lector` пользователи с ролью `lector` получали ошибку 403 (Forbidden).

## Причина

В `middleware.ts` проверка доступа к маршрутам `/lector/*` была настроена некорректно.

## Решение

### 1. Обновлен middleware.ts

Добавлена правильная проверка роли для доступа к `/lector`:

```typescript
// Проверка доступа к роутам преподавателя (lector)
if (req.nextUrl.pathname.startsWith('/lector') && 
    !['lector', 'admin'].includes(role || '')) {
  return new Response('Forbidden', { status: 403 })
}
```

### 2. Обновлен scripts/seed.ts

Обновлено создание демо-преподавателя с использованием роли `lector`.

### 3. Создан скрипт проверки

Добавлен скрипт `scripts/check-demo-users.ts` для быстрой проверки ролей демо-пользователей.

**Использование:**
```bash
npx tsx scripts/check-demo-users.ts
```

## Проверка

После применения исправлений:

1. Пользователи с ролью `lector` имеют доступ к `/lector` ✅
2. Администраторы имеют доступ ✅
3. Остальные роли не имеют доступа ✅

## Демо-аккаунты

Все демо-аккаунты обновлены и работают корректно:

- **Преподаватель:** `lector@demo.com` / `lector123` (роль: `lector`)

## Дата исправления

31 октября 2025 г.

## Связанные файлы

- `middleware.ts` - обновлена проверка доступа
- `scripts/seed.ts` - обновлено создание демо-пользователей
- `scripts/migrate-lector-role.ts` - скрипт миграции ролей
- `scripts/check-demo-users.ts` - скрипт проверки ролей
- `scripts/README.md` - обновлена документация скриптов

