# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é –®–∫–µ–¥

## üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ Coolify (–æ—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–±)

–ü—Ä–æ–µ–∫—Ç –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ [Coolify](https://coolify.io/).

### –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. –í—ã –¥–µ–ª–∞–µ—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ
2. –ö–æ–º–º–∏—Ç–∏—Ç–µ –∏ –ø—É—à–∏—Ç–µ –≤ GitHub:
   ```bash
   git add .
   git commit -m "–≤–∞—à–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π"
   git push origin main
   ```
3. **Coolify –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:**
   - ‚úÖ –û–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–π –∫–æ–º–º–∏—Ç
   - ‚úÖ –ö–ª–æ–Ω–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è
   - ‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
   - ‚úÖ –ü—Ä–∏–º–µ–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ)
   - ‚úÖ –°–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
   - ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä—è–µ—Ç health endpoint

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ –¥–µ–ø–ª–æ—è:

- –û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–Ω–µ–ª—å Coolify
- –ù–∞–π–¥–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç `smartschedule` –∏–ª–∏ `shked`
- –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –¥–µ–ø–ª–æ—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å "Running" üü¢

### –í—Ä–µ–º—è –¥–µ–ø–ª–æ—è:

–û–±—ã—á–Ω–æ –¥–µ–ø–ª–æ–π –∑–∞–Ω–∏–º–∞–µ—Ç **2-5 –º–∏–Ω—É—Ç** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–π.

---

## üìã –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–µ—Å–ª–∏ Coolify –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω)

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
cd /path/to/smartschedule
bash scripts/deploy.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. ‚úÖ –ü–æ–ª—É—á–∏—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ Git
2. ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
3. ‚úÖ –ü—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
4. ‚úÖ –°–æ–±–µ—Ä–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
5. ‚úÖ –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç —Å–µ—Ä–≤–∏—Å

---

## –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ

### –®–∞–≥ 1: –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É

```bash
ssh user@shked.innovators.moscow
# –∏–ª–∏
ssh user@your-server-ip
```

### –®–∞–≥ 2: –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞

```bash
cd /path/to/smartschedule
# –û–±—ã—á–Ω–æ —ç—Ç–æ:
# cd /var/www/smartschedule
# –∏–ª–∏
# cd /home/user/apps/smartschedule
```

### –®–∞–≥ 3: –ü–æ–ª—É—á–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

```bash
git pull origin main
```

–î–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å:
```
dd340e5 fix: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –¥–æ—Å—Ç—É–ø —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∫ –ø—Ä–æ—Å–º–æ—Ç—Ä—É –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π
db30f83 feat: –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è MDXEditor –∏ —Å–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–≥—Ä—É–ø–ø–∞–º–∏
```

### –®–∞–≥ 4: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
npm install
```

### –®–∞–≥ 5: –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```bash
npx prisma generate
npx prisma migrate deploy
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:
```
‚úî Applied migration 20251016174824_add_mdx_support_to_homework
```

### –®–∞–≥ 6: –°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
npm run build
```

### –®–∞–≥ 7: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

#### –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PM2:
```bash
pm2 restart shked
# –∏–ª–∏
pm2 restart all

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
pm2 status

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
pm2 logs shked
```

#### –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Docker:
```bash
docker-compose down
docker-compose up -d --build

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker-compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker-compose logs -f
```

#### –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è systemd:
```bash
sudo systemctl restart smartschedule

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
sudo systemctl status smartschedule

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
sudo journalctl -u smartschedule -f
```

---

## üîÑ –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π

### –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ (homework_comments)

–ï—Å–ª–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è inline –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç (–æ—à–∏–±–∫–∞ 500 –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è), –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

#### –°–ø–æ—Å–æ–± 1: –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç: https://shked.innovators.moscow
2. –í–æ–π–¥–∏—Ç–µ –∫–∞–∫ **–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**
3. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí –≤–∫–ª–∞–¥–∫–∞ Console)
4. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É:

```javascript
fetch('/api/migrate-comments', {
  method: 'POST',
  headers: { 'Content-Type': 'application/json' }
}).then(r => r.json()).then(console.log)
```

5. –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è –æ—Ç–≤–µ—Ç:
```json
{
  "success": true,
  "message": "–¢–∞–±–ª–∏—Ü–∞ homework_comments —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞ —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∫–ª—é—á–∞–º–∏"
}
```

#### –°–ø–æ—Å–æ–± 2: –ß–µ—Ä–µ–∑ curl

```bash
# –°–Ω–∞—á–∞–ª–∞ –ø–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∞–¥–º–∏–Ω–∞
curl -X POST https://shked.innovators.moscow/api/migrate-comments \
  -H "Content-Type: application/json" \
  -H "Cookie: next-auth.session-token=YOUR_SESSION_TOKEN"
```

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

–ß—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∞:

```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –ø–æ–¥ –∞–¥–º–∏–Ω–æ–º
fetch('/api/migrate-comments', {
  method: 'GET'
}).then(r => r.json()).then(console.log)
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å —Å—Ö–µ–º—É —Ç–∞–±–ª–∏—Ü—ã —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏:
- `id`, `submissionId`, `authorId`, `content`
- `startOffset`, `endOffset`, `selectedText`
- `resolved`, `createdAt`, `updatedAt`

#### –ß—Ç–æ –¥–µ–ª–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏—è:

- ‚úÖ –°–æ–∑–¥–∞–µ—Ç —Ç–∞–±–ª–∏—Ü—É `homework_comments` –µ—Å–ª–∏ –µ—ë –Ω–µ—Ç
- ‚úÖ –î–æ–±–∞–≤–ª—è–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∫–æ–ª–æ–Ω–∫–∏
- ‚úÖ –°–æ–∑–¥–∞–µ—Ç –≤–Ω–µ—à–Ω–∏–µ –∫–ª—é—á–∏ –∫ `homework_submissions` –∏ `users`
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç CASCADE –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º

#### –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–∞ —ç—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏—è:

- –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –¥–µ–ø–ª–æ–µ —Å —Ñ—É–Ω–∫—Ü–∏–µ–π inline –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- –ü–æ—Å–ª–µ –ø–µ—Ä–µ–Ω–æ—Å–∞ –Ω–∞ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ –∏–∑ –±—ç–∫–∞–ø–∞ —Å—Ç–∞—Ä–æ–π –≤–µ—Ä—Å–∏–∏ –ë–î

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ health endpoint

```bash
curl https://shked.innovators.moscow/api/health
```

–î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
```json
{
  "status": "healthy",
  "timestamp": "2024-10-16T...",
  "database": "connected"
}
```

### 2. –û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ

```
https://shked.innovators.moscow
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

- ‚úÖ –í—Ö–æ–¥ –ø–æ–¥ —Å—Ç—É–¥–µ–Ω—Ç–æ–º
- ‚úÖ –û—Ç–∫—Ä—ã—Ç–∏–µ –¥–æ–º–∞—à–Ω–µ–≥–æ –∑–∞–¥–∞–Ω–∏—è (–Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 403 –æ—à–∏–±–∫–∏)
- ‚úÖ –°–¥–∞—á–∞ –∑–∞–¥–∞–Ω–∏—è —Å MDX —Ä–µ–¥–∞–∫—Ç–æ—Ä–æ–º
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –ø–æ –ø–æ–¥–≥—Ä—É–ø–ø–∞–º
- ‚úÖ Inline –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:
  - –í–æ–π—Ç–∏ –∫–∞–∫ –ª–µ–∫—Ç–æ—Ä
  - –û—Ç–∫—Ä—ã—Ç—å —Ä–∞–±–æ—Ç—É —Å—Ç—É–¥–µ–Ω—Ç–∞ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
  - –í—ã–¥–µ–ª–∏—Ç—å —Ç–µ–∫—Å—Ç ‚Üí –¥–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è —Ñ–æ—Ä–º–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
  - –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π ‚Üí —Ñ—Ä–∞–≥–º–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω –ø–æ–¥—Å–≤–µ—Ç–∏—Ç—å—Å—è –∂–µ–ª—Ç—ã–º

---

## –û—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)

### –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É –∫–æ–º–º–∏—Ç—É:

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∫–æ–º–º–∏—Ç–æ–≤
git log --oneline -10

# –í–µ—Ä–Ω—É—Ç—å—Å—è –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É –∫–æ–º–º–∏—Ç—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, db30f83)
git reset --hard db30f83

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
npm run build
pm2 restart shked
```

### –û—Ç–∫–∞—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é:

```bash
# –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é
npx prisma migrate resolve --rolled-back 20251016174824_add_mdx_support_to_homework
```

---

## –ß–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞—é—â–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã

### ‚ùå –û—à–∏–±–∫–∞: "Port 3000 already in use"

```bash
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 3000
lsof -i :3000

# –£–±–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å
kill -9 <PID>

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å PM2
pm2 delete shked
pm2 start npm --name "shked" -- start
```

### ‚ùå –û—à–∏–±–∫–∞: "ECONNREFUSED" (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞)

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cat .env | grep DATABASE_URL

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –∑–∞–ø—É—â–µ–Ω –ª–∏ PostgreSQL
sudo systemctl status postgresql
```

### ‚ùå –û—à–∏–±–∫–∞: "Module not found"

```bash
# –û—á–∏—Å—Ç–∏—Ç–µ –∫—ç—à –∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
rm -rf node_modules package-lock.json .next
npm install
npm run build
```

### ‚ùå –û—à–∏–±–∫–∞ 403 Forbidden –≤—Å–µ –µ—â–µ –µ—Å—Ç—å

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–µ–∫—É—â–∏–π –∫–æ–º–º–∏—Ç
git log --oneline -1

# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å:
# dd340e5 fix: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –¥–æ—Å—Ç—É–ø —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∫ –ø—Ä–æ—Å–º–æ—Ç—Ä—É –¥–æ–º–∞—à–Ω–∏—Ö –∑–∞–¥–∞–Ω–∏–π

# –ï—Å–ª–∏ –Ω–µ—Ç, —Å–¥–µ–ª–∞–π—Ç–µ git pull –µ—â–µ —Ä–∞–∑
git pull origin main --rebase
```

### ‚ùå –û—à–∏–±–∫–∞ 500 –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ `homework_comments` –Ω–µ —Å–æ–∑–¥–∞–Ω–∞.

**–†–µ—à–µ–Ω–∏–µ:**
1. –í–æ–π–¥–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç –∫–∞–∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12)
3. –í—ã–ø–æ–ª–Ω–∏—Ç–µ:
   ```javascript
   fetch('/api/migrate-comments', { method: 'POST' })
     .then(r => r.json()).then(console.log)
   ```
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –≤–µ—Ä–Ω—É–ª—Å—è `success: true`
5. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Å–Ω–æ–≤–∞

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. —Ä–∞–∑–¥–µ–ª "–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π" –≤—ã—à–µ.

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏:

```bash
# PM2
pm2 logs shked --lines 100

# Docker
docker-compose logs -f --tail=100

# Systemd
sudo journalctl -u smartschedule -f -n 100
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤:

```bash
# PM2
pm2 monit

# Docker
docker stats

# –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
htop
```

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
3. –°–æ–∑–¥–∞–π—Ç–µ issue –Ω–∞ GitHub: https://github.com/PvUtrix/shked/issues
4. –°–≤—è–∂–∏—Ç–µ—Å—å —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º: shershnev.pv@phystech.edu

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 17 –æ–∫—Ç—è–±—Ä—è 2024  
**–í–µ—Ä—Å–∏—è:** 1.2.0+

