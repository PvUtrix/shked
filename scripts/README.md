# –°–∫—Ä–∏–ø—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

–≠—Ç–æ—Ç –∫–∞—Ç–∞–ª–æ–≥ —Å–æ–¥–µ—Ä–∂–∏—Ç —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞ SmartSchedule.

## üìÅ –°–ø–∏—Å–æ–∫ —Å–∫—Ä–∏–ø—Ç–æ–≤

### `seed.ts`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
npx prisma db seed
# –∏–ª–∏
npm run seed
```

**–ß—Ç–æ —Å–æ–∑–¥–∞–µ—Ç:**
- –î–µ–º–æ-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–∞–¥–º–∏–Ω, —Å—Ç—É–¥–µ–Ω—Ç, –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—å, –º–µ–Ω—Ç–æ—Ä)
- –ì—Ä—É–ø–ø—É "–¢–µ—Ö–ü—Ä–µ–¥ –ú–§–¢–ò 2025-27"
- –ü—Ä–µ–¥–º–µ—Ç—ã –∏–∑ Excel —Ñ–∞–π–ª–∞
- –°—Ç—É–¥–µ–Ω—Ç–æ–≤ —Å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –ø–æ –ø–æ–¥–≥—Ä—É–ø–ø–∞–º
- –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–∞–Ω—è—Ç–∏–π
- –î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è
- –¢–µ—Å—Ç–æ–≤—ã–µ —Å–¥–∞—á–∏

---

### `fix-demo-student-group.ts`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–µ–º–æ-—Å—Ç—É–¥–µ–Ω—Ç–∞ - –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É –∏ –ø–æ–¥–≥—Ä—É–ø–ø—ã.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
npm run fix:demo-student
# –∏–ª–∏
npx tsx scripts/fix-demo-student-group.ts
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ù–∞—Ö–æ–¥–∏—Ç –≥—Ä—É–ø–ø—É "–¢–µ—Ö–ü—Ä–µ–¥ –ú–§–¢–ò 2025-27"
- –ù–∞–∑–Ω–∞—á–∞–µ—Ç –¥–µ–º–æ-—Å—Ç—É–¥–µ–Ω—Ç–∞ (`student123@demo.com`) –≤ —ç—Ç—É –≥—Ä—É–ø–ø—É
- –°–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å UserGroup —Å –ø–æ–¥–≥—Ä—É–ø–ø–∞–º–∏ (1, 1, 1, 1)

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ü–æ—Å–ª–µ –ø–µ—Ä–≤–∏—á–Ω–æ–≥–æ seed, –µ—Å–ª–∏ –¥–µ–º–æ-—Å—Ç—É–¥–µ–Ω—Ç –Ω–µ –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å –î–ó
- –ù–∞ production —Å–µ—Ä–≤–µ—Ä–µ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è
- –ü—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

---

### `check-homework-access.ts`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ —Å—Ç—É–¥–µ–Ω—Ç–∞ –∫ –¥–æ–º–∞—à–Ω–µ–º—É –∑–∞–¥–∞–Ω–∏—é.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
npx tsx scripts/check-homework-access.ts
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –¥–µ–º–æ-—Å—Ç—É–¥–µ–Ω—Ç–µ
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –î–ó
- –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç, –ø–æ—á–µ–º—É –µ—Å—Ç—å –∏–ª–∏ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞
- –í—ã–≤–æ–¥–∏—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É

**–î–ª—è –∫–∞—Å—Ç–æ–º–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:**
–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –≤ —Ñ–∞–π–ª–µ:
```typescript
const homeworkId = 'your-homework-id'
const studentEmail = 'your-student@email.com'
```

---

### `production-fix-demo-student.sql`
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** SQL –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–µ–º–æ-—Å—Ç—É–¥–µ–Ω—Ç–∞ –Ω–∞ production.

**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:**
```bash
# –í–∞—Ä–∏–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ psql
psql $DATABASE_URL -f scripts/production-fix-demo-student.sql

# –í–∞—Ä–∏–∞–Ω—Ç 2: –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤—Ä—É—á–Ω—É—é
psql $DATABASE_URL
# –∑–∞—Ç–µ–º —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –ù–∞–∑–Ω–∞—á–∞–µ—Ç –¥–µ–º–æ-—Å—Ç—É–¥–µ–Ω—Ç–∞ –≤ –≥—Ä—É–ø–ø—É
- –°–æ–∑–¥–∞–µ—Ç/–æ–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å UserGroup
- –í—ã–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:**
- –ù–∞ production —Å–µ—Ä–≤–µ—Ä–µ, –µ—Å–ª–∏ –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ Node.js
- –î–ª—è —Ä—É—á–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è SQL –∫–æ–º–∞–Ω–¥

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
npx prisma migrate dev

# 2. –ó–∞–ø–æ–ª–Ω–∏—Ç—å –±–∞–∑—É —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
npx prisma db seed

# 3. –ï—Å–ª–∏ –¥–µ–º–æ-—Å—Ç—É–¥–µ–Ω—Ç –Ω–µ –≤–∏–¥–∏—Ç –î–ó
npm run fix:demo-student

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø
npx tsx scripts/check-homework-access.ts
```

### Production –¥–µ–ø–ª–æ–π

```bash
# –ü–æ—Å–ª–µ git push –∏ –¥–µ–ø–ª–æ—è —á–µ—Ä–µ–∑ Coolify:

# 1. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh your-user@shked.innovators.moscow

# 2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd /path/to/smartschedule

# 3. –ò—Å–ø—Ä–∞–≤—å—Ç–µ –¥–µ–º–æ-—Å—Ç—É–¥–µ–Ω—Ç–∞
npm run fix:demo-student

# –ò–õ–ò —á–µ—Ä–µ–∑ SQL
psql $DATABASE_URL -f scripts/production-fix-demo-student.sql
```

---

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: –°—Ç—É–¥–µ–Ω—Ç –Ω–µ –≤–∏–¥–∏—Ç –¥–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è (403 –æ—à–∏–±–∫–∞)

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
npx tsx scripts/check-homework-access.ts
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. **–°—Ç—É–¥–µ–Ω—Ç –Ω–µ –≤ –≥—Ä—É–ø–ø–µ** ‚Üí `groupId: null`
   - –†–µ—à–µ–Ω–∏–µ: `npm run fix:demo-student`

2. **–î–ó –¥–ª—è –¥—Ä—É–≥–æ–π –≥—Ä—É–ø–ø—ã** ‚Üí `homework.groupId !== student.groupId`
   - –†–µ—à–µ–Ω–∏–µ: –ù–∞–∑–Ω–∞—á–∏—Ç—å —Å—Ç—É–¥–µ–Ω—Ç–∞ –≤ –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –≥—Ä—É–ø–ø—É –ò–õ–ò –∏–∑–º–µ–Ω–∏—Ç—å `groupId` –∑–∞–¥–∞–Ω–∏—è –Ω–∞ `null`

3. **–°—Ç—É–¥–µ–Ω—Ç –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω** ‚Üí –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Å—Å–∏—é

### –ü—Ä–æ–±–ª–µ–º–∞: –°—Ç—É–¥–µ–Ω—Ç –Ω–µ –≤–∏–¥–∏—Ç —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
# –í Prisma Studio
npx prisma studio

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
# 1. User.groupId - –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω
# 2. UserGroup - –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∑–∞–ø–∏—Å—å —Å –ø–æ–¥–≥—Ä—É–ø–ø–∞–º–∏
# 3. Schedule - –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–ø–∏—Å–∏ –¥–ª—è –≥—Ä—É–ø–ø—ã —Å—Ç—É–¥–µ–Ω—Ç–∞
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
npm run fix:demo-student
```

---

## üìù –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤

### –®–∞–±–ª–æ–Ω —Å–∫—Ä–∏–ø—Ç–∞

```typescript
import { PrismaClient } from '@prisma/client'

const prisma = new PrismaClient()

async function main() {
  try {
    console.log('üîß –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã —Å–∫—Ä–∏–ø—Ç–∞...')

    // –í–∞—à –∫–æ–¥ –∑–¥–µ—Å—å

    console.log('‚úÖ –°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ!')

  } catch (error) {
    console.error('‚ùå –û—à–∏–±–∫–∞:', error)
    process.exit(1)
  } finally {
    await prisma.$disconnect()
  }
}

main()
```

### –ó–∞–ø—É—Å–∫ –Ω–æ–≤–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞

```bash
# –ß–µ—Ä–µ–∑ tsx
npx tsx scripts/your-script.ts

# –î–æ–±–∞–≤–∏—Ç—å –≤ package.json
"scripts": {
  "your-command": "tsx scripts/your-script.ts"
}

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
npm run your-command
```

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–ê–ñ–ù–û:**
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã —Å —Ö–∞—Ä–¥–∫–æ–¥ ID –∏–ª–∏ –ø–∞—Ä–æ–ª—è–º–∏
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç—ã –Ω–∞ –ª–æ–∫–∞–ª—å–Ω–æ–π –±–∞–∑–µ –ø–µ—Ä–µ–¥ production
- –î–µ–ª–∞–π—Ç–µ –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –Ω–∞ production

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

- [Prisma Client API](https://www.prisma.io/docs/concepts/components/prisma-client)
- [Prisma Schema](https://www.prisma.io/docs/concepts/components/prisma-schema)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞](../docs/README.md)

